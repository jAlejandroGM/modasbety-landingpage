---
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";
import { SOCIAL_LINKS, MESSAGES } from "../../data/siteData";
import "swiper/css";

import weddingDress from "../../assets/drawings/weddingdress-drawing.png";
import partyDress from "../../assets/drawings/partydress-drawing.png";
import nightDress from "../../assets/drawings/nightdress-drawing.png";
import quinceaneraDress from "../../assets/drawings/quinceañeradress-drawing.png";
import graduationDress from "../../assets/drawings/graduationdress-drawing.png";
import womanSuit from "../../assets/drawings/womansuit-drawing.png";
import casualClothing from "../../assets/drawings/casualclothing-drawing.png";

const servicios = [
  {
    image: weddingDress,
    titulo: "Vestidos de Novia",
    descripcion:
      "Diseños únicos para el día más especial. Hacemos realidad el vestido de tus sueños.",
  },
  {
    image: partyDress,
    titulo: "Vestidos de Fiesta",
    descripcion:
      "Elegancia y sofisticación para eventos especiales. Cada vestido refleja tu personalidad única.",
  },
  {
    image: nightDress,
    titulo: "Vestidos de Noche",
    descripcion:
      "Glamour y distinción para veladas especiales. Diseños que destacan tu belleza natural.",
  },
  {
    image: quinceaneraDress,
    titulo: "Vestidos de Quinceañera",
    descripcion:
      "Hacemos realidad el vestido de tus sueños para una noche de quince años inolvidable.",
  },
  {
    image: graduationDress,
    titulo: "Vestidos de Promoción",
    descripcion: "Haz de tu graduación una noche única con elegancia y estilo.",
  },
  {
    image: womanSuit,
    titulo: "Sastrería para Damas",
    descripcion:
      "Trajes ejecutivos y formales. Confección a medida para la mujer profesional moderna.",
  },
  {
    image: casualClothing,
    titulo: "Ropa Casual Premium",
    descripcion:
      "Blusas, pantalones y prendas del día a día con acabados de alta costura.",
  },
];

const serviciosInfinitos = Array(10).fill(servicios).flat();
---

<section
  id="especialidades"
  class="flex flex-col items-center gap-8 lg:gap-12"
  aria-labelledby="especialidades-titulo"
>
  <div>
    <h2>
      Tu Estilo,<br />
      Nuestra Especialidad
    </h2>
    <p
      class="text-center text-sm md:text-base lg:text-xl text-balance max-w-xl m-auto italic"
    >
      Creamos prendas únicas para cada ocasión especial de tu vida
    </p>
  </div>

  <div class="swiper w-full h-auto! py-8! relative">
    <div class="swiper-wrapper">
      {
        serviciosInfinitos.map((servicio, index) => (
          <article class="swiper-slide flex flex-col flex-none w-64! md:w-72! h-auto! items-center text-center gap-3 lg:gap-4 p-6 md:py-8 border border-white/20 rounded-xl backdrop-blur-md transition-all duration-300 hover:-translate-y-1 hover:bg-none hover:border-sakura-primary/30 hover:shadow-[0_0_35px_rgba(255,192,203,0.2)]">
            <Image
              src={servicio.image}
              alt={`Boceto de ${servicio.titulo}`}
              width="300"
              densities={[1.5, 2]}
              class="mx-auto w-1/2 lg:w-5/8 xl:w-4/5 h-auto"
            />
            <h3 class="font-text text-base md:text-lg lg:text-xl font-bold">
              {servicio.titulo}
            </h3>
            <p class="text-sm lg:text-base leading-relaxed text-gray-300">
              {servicio.descripcion}
            </p>
          </article>
        ))
      }
    </div>
  </div>

  <aside
    class="flex flex-col items-center gap-6 p-6 border border-sakura-primary/50 rounded-2xl shadow-[0_0_60px_rgba(255,192,203,0.2)] w-11/12 md:w-4/6 max-w-xl mx-auto backdrop-blur-sm"
  >
    <p
      class="text-base md:text-lg lg:text-2xl font-medium text-sakura-primary text-center text-balance"
    >
      ¿Lista para tu prenda soñada? Recibe una asesoría personalizada sin costo.
    </p>
    <a
      href={SOCIAL_LINKS.whatsapp(MESSAGES.whatsappDefault)}
      target="_blank"
      class="wsp-btn flex items-center gap-2 text-sm md:text-base lg:text-lg"
      rel="noopener noreferrer"
      aria-label="Solicitar información detallada por WhatsApp"
    >
      Conversemos sobre tu idea
      <Icon
        name="mdi:whatsapp"
        class="h-6 w-6 md:h-8 md:w-8 text-inherit"
        aria-hidden="true"
      />
    </a>
  </aside>
</section>

<script>
  import Swiper from "swiper";
  import { Autoplay, FreeMode } from "swiper/modules";

  new Swiper(".swiper", {
    modules: [Autoplay, FreeMode],
    loop: true,
    slidesPerView: "auto",
    spaceBetween: 16,
    speed: 4000,
    grabCursor: true,
    freeMode: {
      enabled: true,
      momentum: false,
      sticky: false,
    },
    autoplay: {
      delay: 0,
      disableOnInteraction: false,
      pauseOnMouseEnter: true,
    },
    breakpoints: {
      768: {
        spaceBetween: 32,
      },
    },
  });
</script>

<style>
  .swiper::before,
  .swiper::after {
    position: absolute;
    top: 2rem;
    width: 150px;
    height: calc(100% - 4rem);
    pointer-events: none;
    content: "";
    z-index: 10;
    mask-image: linear-gradient(
      to bottom,
      transparent 0%,
      black 20%,
      black 80%,
      transparent 100%
    );
  }

  .swiper::before {
    left: 0;
    background: linear-gradient(
      to left,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 192, 203, 0.06) 80%,
      rgba(255, 192, 203, 0.1) 100%
    );
  }

  .swiper::after {
    right: 0;
    background: linear-gradient(
      to right,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 192, 203, 0.06) 80%,
      rgba(255, 192, 203, 0.12) 100%
    );
  }

  .swiper :global(.swiper-wrapper) {
    transition-timing-function: linear;
  }
</style>
