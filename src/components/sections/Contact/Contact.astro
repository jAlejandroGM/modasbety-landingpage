---
import { Icon } from "astro-icon/components";
import SocialNav from "../../ui/SocialNav.astro";
import LocationMap from "./LocationMap.astro";
import { CONTACT_INFO } from "../../../data/siteData";
---

<section
  id="ubicacion"
  class="flex flex-col items-center gap-6 md:gap-12 w-full px-4"
  role="region"
>
  <h2>Encuéntranos</h2>
  <div
    class="flex flex-col lg:flex-row gap-8 lg:gap-12 items-start w-full max-w-6xl"
  >
    <LocationMap />

    <address
      class="flex flex-col gap-4 md:gap-8 text-sm md:text-base not-italic w-full lg:w-1/2"
    >
      <div class="flex gap-4 items-center">
        <Icon
          class="text-sakura-primary size-10 md:size-12 border-2 border-sakura-primary rounded-full p-2 shrink-0"
          name="mdi:store-marker"
        />
        <div class="flex flex-col gap-2 w-full">
          <p>
            {CONTACT_INFO.address.street}, {CONTACT_INFO.address.urbanization}, {
              CONTACT_INFO.address.city
            }.
          </p>

          <p>
            {CONTACT_INFO.address.reference}
          </p>
        </div>
      </div>

      <div class="flex gap-4 items-center">
        <Icon
          class="text-sakura-primary size-10 md:size-12 border-2 border-sakura-primary rounded-full p-2 shrink-0"
          name="mdi:directions"
        />

        <a
          href={CONTACT_INFO.mapDirectionsUrl}
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Cómo llegar a Modas Bety"
          class="text-sakura-primary hover:underline underline-offset-4"
        >
          Ver como llegar
        </a>
      </div>

      <div class="flex gap-4 items-center">
        <Icon
          class="text-sakura-primary size-10 md:size-12 border-2 border-sakura-primary rounded-full p-2 shrink-0"
          name="mdi:calendar-clock"
        />
        <div class="flex flex-col">
          <p>Atención de {CONTACT_INFO.schedule.days} de:</p>
          <p>
            {CONTACT_INFO.schedule.morning} & {CONTACT_INFO.schedule.afternoon}
          </p>
        </div>
      </div>

      <div class="flex gap-4 items-center">
        <Icon
          class="text-sakura-primary size-10 md:size-12 border-2 border-sakura-primary rounded-full p-2 shrink-0"
          name="mdi:phone"
        />
        <span>{CONTACT_INFO.phonePretty}</span>
        <div class="relative group">
          <button
            id="copy-btn"
            aria-label="Copiar número de teléfono"
            title="Copiar número de teléfono"
            class="cursor-pointer transition-all duration-300 flex items-center"
          >
            <Icon
              class="text-sakura-primary hover:text-sakura-hover/70 size-6"
              name="mdi:content-copy"
            />
          </button>
          <span
            id="copy-tooltip"
            class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs text-black bg-sakura-primary rounded opacity-0 transition-opacity duration-300 pointer-events-none"
          >
            ¡Copiado!
          </span>
        </div>
      </div>
      <SocialNav />
    </address>
  </div>
</section>

<script define:vars={{ whatsappNumber: CONTACT_INFO.whatsappNumber }}>
  const copyBtn = document.getElementById("copy-btn");
  const tooltip = document.getElementById("copy-tooltip");

  if (copyBtn && tooltip) {
    copyBtn.addEventListener("click", () => {
      navigator.clipboard.writeText(whatsappNumber);
      tooltip.classList.remove("opacity-0");
      setTimeout(() => {
        tooltip.classList.add("opacity-0");
      }, 3000);
    });
  }
</script>
