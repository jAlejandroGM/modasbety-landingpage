---
import SakuraCanvas from "../components/layout/SakuraCanvas.astro";
import "../styles/global.css";
import "@fontsource/playfair-display";
import "@fontsource/inter";
import { SITE_INFO, CONTACT_INFO, SOCIAL_LINKS } from "../data/siteData";

interface Props {
  title?: string;
  description?: string;
}

const { title = SITE_INFO.title, description = SITE_INFO.description } =
  Astro.props;

const canonicalURL = new URL(
  Astro.url.pathname,
  Astro.site || "http://localhost:4321"
);

const structuredData = {
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "@id": `${SITE_INFO.url}/#business`,
  name: SITE_INFO.name,
  description: description,
  telephone: `+${CONTACT_INFO.whatsappNumber}`,
  address: {
    "@type": "PostalAddress",
    streetAddress: CONTACT_INFO.address.street,
    addressLocality: CONTACT_INFO.address.city,
    addressRegion: CONTACT_INFO.address.region,
    postalCode: CONTACT_INFO.address.postalCode,
    addressCountry: CONTACT_INFO.address.country,
  },
  geo: {
    "@type": "GeoCoordinates",
    latitude: CONTACT_INFO.coordinates.lat,
    longitude: CONTACT_INFO.coordinates.lng,
  },
  openingHoursSpecification: [
    {
      "@type": "OpeningHoursSpecification",
      dayOfWeek: [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
      ],
      opens: "09:00",
      closes: "12:00",
    },
    {
      "@type": "OpeningHoursSpecification",
      dayOfWeek: [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
      ],
      opens: "15:00",
      closes: "20:00",
    },
  ],
  sameAs: [SOCIAL_LINKS.facebook, SOCIAL_LINKS.instagram],
};
---

<html lang="es-PE" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO -->
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta
      name="keywords"
      content={`alta costura, confecciÃ³n, medida, damas, moda, ${CONTACT_INFO.address.city}, ${CONTACT_INFO.address.country}, ${SITE_INFO.name}`}
    />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href={canonicalURL} />

    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content={SITE_INFO.name} />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- Structured Data (JSON-LD) -->
    <script
      type="application/ld+json"
      set:html={JSON.stringify(structuredData)}
    />

    <!-- Preload sakura image used by canvas -->
    <link
      rel="preload"
      as="image"
      href="/images/flor-de-sakura.webp"
      type="image/webp"
      fetchpriority="high"
    />
  </head>
  <body
    class="flex flex-col min-h-screen gap-12 md:gap-18 lg:gap-24 text-gray-50 transition-all duration-300"
  >
    <SakuraCanvas />
    <slot />
  </body>
</html>
